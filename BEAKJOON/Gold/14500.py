#테트로미노

N,M=map(int,input().split())
arr=[list(map(int,input().split())) for _ in range(N)]
directions=[[(0,0),(0,1),(0,2),(0,3)],[(0,0),(1,0),(2,0),(3,0)],#일직선
            [(0,0),(0,1),(1,0),(1,1)],# 정사각형
            [(0,0),(1,0),(1,1),(2,1)],[(0,0),(1,0),(1,-1),(2,-1)],[(0,0),(0,1),(1,1),(1,2)],[(0,0),(1,0),(1,-1),(2,-1)],[(0,0),(0,1),(-1,1),(-1,2)],[(0,0),(1,0),(1,1),(1,2)],[(0,0),(0,-1),(1,-1),(2,-1)],[(0,0),(-1,0),(-1,1),(-1,2)],
            [(0,0),(0,1),(1,1),(0,2)],[(0,0),(1,0),(1,-1),(2,0)],[(0,0),(0,1),(-1,1),(0,2)],[(0,0),(1,0),(2,0),(1,1)], #ㅗ 모양
            [(0,0),(0,1),(0,2),(1,2)],[(0,0),(1,0),(2,0),(2,-1)],[(0,0),(1,0),(2,0),(2,1)],[(0,0),(0,1),(0,2),(-1,2)]] # L모양
ans=0
for i in range(N):
    for j in range(M):
        for dir in directions:
            tmp=0
            for d in dir:
                if 0<=i+d[0]<N and 0<=j+d[1]<M:
                    tmp+=arr[i+d[0]][j+d[1]]
            ans=max(ans,tmp)
print(ans)